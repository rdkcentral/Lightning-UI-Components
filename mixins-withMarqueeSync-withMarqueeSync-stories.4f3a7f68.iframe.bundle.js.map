{"version":3,"file":"mixins-withMarqueeSync-withMarqueeSync-stories.4f3a7f68.iframe.bundle.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AAGA;AACA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AAEA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AA1EA;AACA;AAAA;AAAA;AA2EA;;;;;;;;;;;;;;;;AC3GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AAEA;AACA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA","sources":["webpack://lightning-ui-docs/../../@lightningjs/ui-components/src/mixins/withMarqueeSync/withMarqueeSync.js","webpack://lightning-ui-docs/../../@lightningjs/ui-components/src/mixins/withMarqueeSync/withMarqueeSync.stories.js"],"sourcesContent":["/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport logger from '../../globals/context/logger';\n/**\n * apply to a component to synchronize the marquee scroll\n * timing of child TextBox components. Target class must\n * have a `get syncArray` property, which contains an\n * array of the tags of all TextBoxes to be synchronized.\n *\n * @param {*} Base class to be extended\n * @returns class with marquee sync functionality\n */\nexport default function withMarqueeSync(Base) {\n  return class extends Base {\n    static get name() {\n      return Base.name;\n    }\n\n    _init() {\n      // use _init instead of _construct to ensure elements exist before running setup\n      super._init();\n      if (this._shouldSync) {\n        this._updateSignals();\n      }\n    }\n\n    _update() {\n      super._update();\n      if (this._shouldSync) {\n        this._updateSignals();\n      } else {\n        this._cleanupSyncValues();\n      }\n    }\n\n    _cleanupSyncValues() {\n      this.syncArray.map(component => {\n        component.marqueeOverrideLoopX = undefined;\n        component.signals &&\n          component.signals.willMarquee &&\n          delete component.signals.willMarquee;\n      });\n    }\n\n    _updateSignals() {\n      if (this.syncArray) {\n        this.syncArray.map(component => {\n          // preserve signals set in Base class\n          component.signals = {\n            ...component.signals,\n            willMarquee: '_willMarquee'\n          };\n        });\n      }\n    }\n\n    _willMarquee(compRef) {\n      if (this._shouldSync) {\n        this._longestMarqueeWidth = Math.max(\n          compRef._textRenderedW || 0,\n          this._longestMarqueeWidth || 0\n        );\n        this.syncArray.map(component => {\n          component.marqueeOverrideLoopX = this._longestMarqueeWidth;\n        });\n      }\n    }\n\n    get _shouldSync() {\n      if (this.style.marqueeSync === false) {\n        // only fail this case if explicitly false\n        return false;\n      }\n      if (!this.syncArray) {\n        logger.warn(\n          'warning: components using MarqueeSync must have a syncArray getter defined.'\n        );\n        return false;\n      } else if (!Array.isArray(this.syncArray)) {\n        logger.warn('warning: syncArray must be typeof array.');\n        return false;\n      } else if (this.syncArray.length < 2) {\n        logger.warn(\n          'warning: syncArray must contain at least two component references.'\n        );\n        return false;\n      } else {\n        return true;\n      }\n    }\n  };\n}\n","/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport withMarqueeSync from './withMarqueeSync';\nimport Base from '../../components/Base';\nimport TextBox from '../../components/TextBox';\n\nexport default {\n  title: 'Utilities/withMarqueeSync'\n};\n\nexport const Basic = () => {\n  return class Basic extends withMarqueeSync(Base) {\n    static get __componentName() {\n      return 'Basic';\n    }\n    static _template() {\n      return {\n        Basic: {\n          Title: {\n            type: TextBox,\n            content: 'Lorem ipsum dolor sit amet, consectetur adipiscing',\n            style: { textStyle: { wordWrapWidth: 250, maxLines: 1 } },\n            marquee: true\n          },\n          Subtitle: {\n            type: TextBox,\n            content:\n              'Morbi vehicula rhoncus aliquam. Cras eget vulputate lectus. Aenean egestas mi at scelerisque cursus.',\n            y: 30,\n            style: { textStyle: { wordWrapWidth: 250, maxLines: 1 } },\n            marquee: true\n          }\n        }\n      };\n    }\n\n    get syncArray() {\n      return [this.tag('Title'), this.tag('Subtitle')];\n    }\n  };\n};\n\nBasic.storyName = 'withMarqueeSync';\n"],"names":[],"sourceRoot":""}