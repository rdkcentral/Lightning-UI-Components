import { Canvas, Story } from '@storybook/addon-docs';
import BoardRow from '.';

# BoardRow

BoardRows allow for editorial flexibility while maintaining the ability for users to scroll horizontally to browse additional content.

## Source

https://github.comcast.com/Lightning/lightning-ui/packages/@lightning/ui/src/components/BoardRow/BoardRow.js

## Usage

BoardRows support all the major features of Rows and are used in a very similar way with a few exceptions.

Only item types that extend `Card` are allowed to be passed in to the item array if the 'card' layout is being used. All other layouts will only accept components that have `Tile` in their prototype chain.

```js
import { BoardRow, Tile } from '@lightning/ui';

// srcCallback is optional, can be useful if receiving an entity id back from an API and transforming it into a src url for each item
function srcCallback({ type, src, w, h }) {
  return new Promise(resolve => {
    let imgSrc, focusSrc;
   if (VerticalCardLarge.isPrototypeOf(type)) {
      imgSrc = `http://myriad.merlin.comcast.com/select/image?entityId=${src}&width=${w}&ratio=3x2`;
    } else {
      imgSrc = `http://myriad.merlin.comcast.com/select/image?entityId=${src}&width=${w}&height=${h}&rule=title`;
      focusSrc = `http://myriad.merlin.comcast.com/select/image?entityId=${src}&width=${w}&height=${h}&rule=noTitle`;
    }

    const img = new Image();
    img.src = imgSrc;
    img.onload = () => {
      resolve({ src: imgSrc, focusSrc });
    };

    img.onerror = () => {
      // Fallback to default aspect ratio if not found
      resolve({
        src:
          type.prototype instanceof VerticalCardLarge
            ? `http://myriad.merlin.comcast.com/select/image?entityId=${src}&width=${w}&ratio=16x9&rule=noTitle`
            : `http://myriad.merlin.comcast.com/select/image?entityId=${src}&width=${w}&ratio=16x9`
      });
    };

    const imgFocusPreload = new Image();
    imgFocusPreload.src = focusSrc;
    imgFocusPreload.onload = () => {
      console.log(`${focusSrc} preloaded`);
    };
  });
}

class Example extends lng.Component {
  static _template() {
    return {
      BoardRow: {
        menuCard: {
          title: 'BoardRow example',
          description: `Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean lobortis quam eget mi fermentum, a malesuada lectus convallis. Suspendisse potenti.`,
          cta: 'View All',
          gradientColor: '#E6004A',
          onEnter: () => {
            console.log('view all action');
          },
          onInfo: () => {
            console.log('view all on info action');
          }
        },
        items: [
          {
            type: Tile,
            src: '5369987084856006112', // Id can be passed to the srcCallback
            //src: myImage1, // A full url can also be placed here
            title: 'Tile 1'
          }
        ]
        itemSpacing: 40,
        layout: 'standard',
        type: BoardRow,
        viewAll: true,
      }
    };
  }
}
```

<Canvas>
  <Story id="navigation-boardrow--basic" />
</Canvas>

## API

### Properties

| name         | type     | required | default   | description                                                                                                                                                                                                                                                                                                                        |
| ------------ | -------- | -------- | --------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| alwaysScroll | boolean  | false    | false     | Determines whether the row will stop scrolling as it nears the right to prevent white space.                                                                                                                                                                                                                                       |
| items        | array    | false    | []        | Components to list in the row.                                                                                                                                                                                                                                                                                                     |
| layout       | string   | false    | standard  | Layout configuration to display content with ex. standard, hero, poster, card, square, squareSmall.                                                                                                                                                                                                                                |
| lazyScroll   | boolean  | false    | false     | Will only scroll the row if the item is off screen and alwaysScroll and neverScroll are both false.                                                                                                                                                                                                                                |
| menuCard     | object   | false    | {}        | Object containing all values for MenuCard (See table below).                                                                                                                                                                                                                                                                       |
| neverScroll  | boolean  | false    | false     | If true, the row will never scroll, unless alwaysScroll is set to true, and if false, the row will apply normal scrolling logic.                                                                                                                                                                                                   |
| scrollIndex  | number   | false    | 0         | Item index at which scrolling begins, provided the sum of item widths is greater than the width of the `Row`.                                                                                                                                                                                                                      |
| srcCallback  | function | false    | undefined | A function can be passed in that will receive `{ type, src, w, h }` back from each item that has an `src` property. This function can return a value for the final src image or a Promise that returns a value for the final src value. This can be useful when attempting to fetch an image from an external service like myriad. |
| viewAll      | boolean  | false    | false     | If set to true it will duplicate the menu card at the end of items.                                                                                                                                                                                                                                                                |

### Style Properties

| name        | type   | description                |
| ----------- | ------ | -------------------------- |
| itemSpacing | number | Space in px between items. |

### menuCard Properties

The menuCard object will accept the same properties of [CardTitle](?path=/docs/tiles-cards-cardtitle--card-title)
