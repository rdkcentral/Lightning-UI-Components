{"version":3,"file":"TestUtils-makeCreateComponent-mdx.e568eba6.iframe.bundle.js","mappings":";;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC5OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACnFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://lightning-ui-docs/../../@lightningjs/ui-components-test-utils/src/docs/TestUtils/makeCreateComponent.mdx","webpack://lightning-ui-docs/../../../node_modules/@storybook/addon-docs/node_modules/@mdx-js/react/lib/index.js","webpack://lightning-ui-docs/../../../node_modules/@storybook/core/dist/components/ sync","webpack://lightning-ui-docs/../../../node_modules/memoizerific/ sync"],"sourcesContent":["\nimport React from 'react';\n\n/*prettier-ignore*/\n/*\nCopyright 2023 Comcast Cable Communications Management, LLC\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\nhttp://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n\nSPDX-License-Identifier: Apache-2.0\n\\*/\nimport {Fragment as _Fragment, jsx as _jsx, jsxs as _jsxs} from \"react/jsx-runtime\";\nimport {useMDXComponents as _provideComponents} from \"/home/runner/work/Lightning-UI-Components/Lightning-UI-Components/node_modules/@storybook/addon-docs/dist/shims/mdx-react-shim.mjs\";\nimport {Meta} from '@storybook/blocks';\nfunction _createMdxContent(props) {\n  const _components = {\n    a: \"a\",\n    code: \"code\",\n    h1: \"h1\",\n    h2: \"h2\",\n    h3: \"h3\",\n    h4: \"h4\",\n    h5: \"h5\",\n    li: \"li\",\n    ol: \"ol\",\n    p: \"p\",\n    pre: \"pre\",\n    strong: \"strong\",\n    table: \"table\",\n    tbody: \"tbody\",\n    td: \"td\",\n    th: \"th\",\n    thead: \"thead\",\n    tr: \"tr\",\n    ..._provideComponents(),\n    ...props.components\n  };\n  return _jsxs(_Fragment, {\n    children: [\"\\n\", \"\\n\", \"\\n\", _jsx(Meta, {\n      title: \"Docs / Unit Testing / Test Utils / makeCreateComponent \"\n    }), \"\\n\", _jsx(_components.h1, {\n      id: \"makecreatecomponent\",\n      children: \"makeCreateComponent\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Returns a function, referred to as a \", _jsx(_components.code, {\n        children: \"createComponent\"\n      }), \" function, which is used to generate an instance of a component to run unit test cases against.\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      id: \"arguments\",\n      children: \"Arguments\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.code, {\n        children: \"makeCreateComponent(component, defaultConfig, defaultOptions)\"\n      })\n    }), \"\\n\", _jsxs(_components.table, {\n      children: [_jsx(_components.thead, {\n        children: _jsxs(_components.tr, {\n          children: [_jsx(_components.th, {\n            children: \"argument\"\n          }), _jsx(_components.th, {\n            children: \"type\"\n          }), _jsx(_components.th, {\n            children: \"default\"\n          }), _jsx(_components.th, {\n            children: \"description\"\n          })]\n        })\n      }), _jsxs(_components.tbody, {\n        children: [_jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: \"component\"\n          }), _jsx(_components.td, {\n            children: \"lng.Component\"\n          }), _jsx(_components.td, {\n            children: \"undefined\"\n          }), _jsx(_components.td, {\n            children: \"component to render an instance of\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: \"defaultConfig\"\n          }), _jsx(_components.td, {\n            children: \"object\"\n          }), _jsx(_components.td, {}), _jsx(_components.td, {\n            children: \"properties that should be applied to the component by default\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: \"defaultOptions\"\n          }), _jsx(_components.td, {\n            children: \"object\"\n          }), _jsx(_components.td, {}), _jsxs(_components.td, {\n            children: [\"default options used when creating the component instance (these options are passed to the \", _jsx(_components.code, {\n              children: \"TestRenderer.create\"\n            }), \" function)\"]\n          })]\n        })]\n      })]\n    }), \"\\n\", _jsx(_components.h3, {\n      id: \"createcomponent\",\n      children: _jsx(_components.code, {\n        children: \"createComponent\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Returns an array of 2 elements:\"\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"an instance of the component to be tested against (generated by \", _jsx(_components.code, {\n          children: \"testRenderer.getInstance()\"\n        }), \")\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"a \", _jsx(_components.a, {\n          href: \"/story/docs-unit-testing-test-renderer-create--page#testrenderer-functions\",\n          children: \"testRenderer\"\n        }), \" object generated using the \", _jsx(_components.code, {\n          children: \"component\"\n        }), \" argument and a merged object created from \", _jsx(_components.code, {\n          children: \"defaultOptions\"\n        }), \" and \", _jsx(_components.code, {\n          children: \"options\"\n        })]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h4, {\n      id: \"arguments-1\",\n      children: \"Arguments\"\n    }), \"\\n\", _jsxs(_components.table, {\n      children: [_jsx(_components.thead, {\n        children: _jsxs(_components.tr, {\n          children: [_jsx(_components.th, {\n            children: \"argument\"\n          }), _jsx(_components.th, {\n            children: \"type\"\n          }), _jsx(_components.th, {\n            children: \"default\"\n          }), _jsx(_components.th, {\n            children: \"description\"\n          })]\n        })\n      }), _jsxs(_components.tbody, {\n        children: [_jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: \"config\"\n          }), _jsx(_components.td, {\n            children: \"object\"\n          }), _jsx(_components.td, {}), _jsxs(_components.td, {\n            children: [\"properties that should be applied to the component. This object is spread over the \", _jsx(_components.code, {\n              children: \"defaultConfig\"\n            }), \" object.\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: \"options\"\n          }), _jsx(_components.td, {\n            children: \"object\"\n          }), _jsx(_components.td, {}), _jsxs(_components.td, {\n            children: [\"options used when creating the component instance (these options are passed to the \", _jsx(_components.code, {\n              children: \"TestRenderer.create\"\n            }), \" function). This object is spread over the \", _jsx(_components.code, {\n              children: \"defaultOptions\"\n            }), \" object\"]\n          })]\n        })]\n      })]\n    }), \"\\n\", _jsx(\"br\", {}), \"\\n\", _jsxs(_components.h5, {\n      id: \"example-generating-a-makecomponent-function-and-test-component\",\n      children: [\"Example: Generating a \", _jsx(_components.code, {\n        children: \"makeComponent\"\n      }), \" function and test component\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-js\",\n        children: \"import lng from '@lightningjs/core';\\nimport { makeCreateComponent } from '@lightningjs/ui-components-test-utils';\\n\\n// Lightning component to write unit tests for\\nclass Example extends lng.Component {\\n  static _template() {\\n    return {\\n      Example: {\\n        text: { text: '' }\\n      }\\n    };\\n  }\\n\\n  set exampleProp(value) {\\n    this._exampleProp = value;\\n    this.tag('Example').text.text = value;\\n  }\\n\\n  get exampleProp() {\\n    return this._exampleProp;\\n  }\\n}\\n\\n// unit tests for Example component\\n\\n// generate a createComponent function to use in tests\\nconst defaultConfig = { exampleProp: 'foo' };\\nconst defaultOptions = { focused: false };\\nconst createExampleComponent = makeCreateComponent(\\n  Example,\\n  defaultConfig,\\n  defaultOptions\\n);\\n\\n// Ex. An instance of the component rendered with the properties defined in the defaultConfig and defaultOptions object\\nit('should render the exampleProp value as text', () => {\\n  const [example] = createExampleComponent();\\n\\n  expect(example.exampleProp).toBe('foo');\\n  expect(example.tag('Example').text.text).toBe('foo');\\n  expect(example.hasFocus()).toBe(false);\\n});\\n\\n// Ex. An instance of the component rendered with the properties defined in the config object\\nit('should support updating the text', () => {\\n  // overwrite the value of exampleProp defined in defaultConfig\\n  const [example] = createExampleComponent({\\n    exampleProp: 'bar'\\n  });\\n\\n  expect(example.exampleProp).toBe('bar');\\n  expect(example.tag('Example').text.text).toBe('bar');\\n});\\n\\n// Ex. An instance of the component rendered with options defined in the options object\\nit('should support rendering the component in a focused state', () => {\\n  // overwrite the value of focused defined in defaultOptions\\n  const [example] = createExampleComponent({}, { focused: true });\\n\\n  expect(example.hasFocus()).toBe(true);\\n});\\n\\n// Ex. Using a function provided by the testRenderer object (focus)\\nit('should allow focusing on the component', () => {\\n  const [example, testRenderer] = createExampleComponent();\\n\\n  // focused was set to false in defaultOptions, so the componet will initially render without focus\\n  expect(example.hasFocus()).toBe(false);\\n\\n  testRenderer.focus();\\n\\n  expect(example.hasFocus()).toBe(true);\\n});\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      id: \"spyonmethods\",\n      children: \"spyOnMethods\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"A utility which enables running component methods asynchronously.\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The \", _jsx(_components.code, {\n        children: \"options\"\n      }), \" argument passed to the \", _jsx(_components.code, {\n        children: \"createComponent\"\n      }), \" function accepts a field called \", _jsx(_components.code, {\n        children: \"spyOnMethods\"\n      }), \".\\nThe value for \", _jsx(_components.code, {\n        children: \"spyOnMethods\"\n      }), \" can be an array of method names to generate promises from. When one of those methods is invoked in the component it's associated promise will resolve, then the actual method will be invoked. The promises generated from the passed in methods are given the name \", _jsx(_components.code, {\n        children: \"_${methodName}SpyPromise\"\n      }), \".\"]\n    }), \"\\n\", _jsx(\"br\", {}), \"\\n\", _jsx(_components.h5, {\n      id: \"example-spying-on-component-methods-and-awaiting-their-execution-before-making-assertions-on-their-side-effects\",\n      children: \"Example: Spying on component methods and awaiting their execution before making assertions on their side effects\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-js\",\n        children: \"class MethodSpiesExample extends Base {\\n  static get __componentName() {\\n    return 'MethodSpiesExample';\\n  }\\n\\n  static _template() {\\n    return {\\n      Title: {\\n        type: TextBox\\n      },\\n      Subtitle: {\\n        type: TextBox,\\n        y: 100\\n      }\\n    };\\n  }\\n\\n  static get tags() {\\n    return ['Title', 'Subtitle'];\\n  }\\n\\n  static get properties() {\\n    return ['title', 'subtitle'];\\n  }\\n\\n  _construct() {\\n    super._construct();\\n    this._title = 'title';\\n    this._subtitle = 'subtitle';\\n  }\\n\\n  _update() {\\n    this._updateTitle();\\n    this._updateSubtitle();\\n  }\\n\\n  _updateTitle() {\\n    this._Title.content = this.title;\\n  }\\n  _updateSubtitle() {\\n    this._Subtitle.content = this.subtitle;\\n  }\\n}\\n\\nconst createComponent = makeCreateComponent(MethodSpies);\\n\\nit('should update the title and subtitle', async () => {\\n  const [methodSpiesComponent, testRenderer] = createComponent(\\n    {},\\n    { spyOnMethods: ['_update'] }\\n  );\\n\\n  // wait for _update to be called on the initial render before proceeding\\n  await methodSpiesComponent.__updateSpyPromise;\\n\\n  expect(methodSpiesComponent._Title.content).toBe('title');\\n  expect(methodSpiesComponent._Subtitle.content).toBe('subtitle');\\n\\n  const newTitle = 'new title';\\n  const newSubtitle = 'new subtitle';\\n  methodSpiesComponent.patch({\\n    title: newTitle,\\n    subtitle: newSubtitle\\n  });\\n\\n  // wait for _update to be called in response to values in the properties array changing\\n  await methodSpiesComponent.__updateSpyPromise;\\n\\n  expect(methodSpiesComponent._Title.content).toBe(newTitle);\\n  expect(methodSpiesComponent._Subtitle.content).toBe(newSubtitle);\\n});\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsxs(_components.strong, {\n        children: [\"Note: \", _jsx(_components.code, {\n          children: \"spyOnMethods\"\n        }), \" can only be set in in the \", _jsx(_components.code, {\n          children: \"options\"\n        }), \" object of \", _jsx(_components.code, {\n          children: \"createComponent\"\n        }), \". It can not be assigned to the \", _jsx(_components.code, {\n          children: \"defaultOptions\"\n        }), \" object in \", _jsx(_components.code, {\n          children: \"makeCreateComponent\"\n        })]\n      })\n    })]\n  });\n}\nexport default function MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = {\n    ..._provideComponents(),\n    ...props.components\n  };\n  return MDXLayout ? _jsx(MDXLayout, {\n    ...props,\n    children: _jsx(_createMdxContent, {\n      ...props\n    })\n  }) : _createMdxContent(props);\n}\n","/**\n * @typedef {import('mdx/types.js').MDXComponents} MDXComponents\n * @typedef {import('react').Component<{}, {}, unknown>} Component\n * @typedef {import('react').ReactNode} ReactNode\n */\n\n/**\n * @callback MergeComponents\n *   Custom merge function.\n * @param {Readonly<MDXComponents>} currentComponents\n *   Current components from the context.\n * @returns {MDXComponents}\n *   Additional components.\n *\n * @typedef Props\n *   Configuration for `MDXProvider`.\n * @property {ReactNode | null | undefined} [children]\n *   Children (optional).\n * @property {Readonly<MDXComponents> | MergeComponents | null | undefined} [components]\n *   Additional components to use or a function that creates them (optional).\n * @property {boolean | null | undefined} [disableParentContext=false]\n *   Turn off outer component context (default: `false`).\n */\n\nimport React from 'react'\n\n/** @type {Readonly<MDXComponents>} */\nconst emptyComponents = {}\n\nconst MDXContext = React.createContext(emptyComponents)\n\n/**\n * Get current components from the MDX Context.\n *\n * @param {Readonly<MDXComponents> | MergeComponents | null | undefined} [components]\n *   Additional components to use or a function that creates them (optional).\n * @returns {MDXComponents}\n *   Current components.\n */\nexport function useMDXComponents(components) {\n  const contextComponents = React.useContext(MDXContext)\n\n  // Memoize to avoid unnecessary top-level context changes\n  return React.useMemo(\n    function () {\n      // Custom merge via a function prop\n      if (typeof components === 'function') {\n        return components(contextComponents)\n      }\n\n      return {...contextComponents, ...components}\n    },\n    [contextComponents, components]\n  )\n}\n\n/**\n * Provider for MDX context.\n *\n * @param {Readonly<Props>} properties\n *   Properties.\n * @returns {JSX.Element}\n *   Element.\n * @satisfies {Component}\n */\nexport function MDXProvider(properties) {\n  /** @type {Readonly<MDXComponents>} */\n  let allComponents\n\n  if (properties.disableParentContext) {\n    allComponents =\n      typeof properties.components === 'function'\n        ? properties.components(emptyComponents)\n        : properties.components || emptyComponents\n  } else {\n    allComponents = useMDXComponents(properties.components)\n  }\n\n  return React.createElement(\n    MDXContext.Provider,\n    {value: allComponents},\n    properties.children\n  )\n}\n","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = () => ([]);\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = \"../../../node_modules/@storybook/core/dist/components sync recursive\";\nmodule.exports = webpackEmptyContext;","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = () => ([]);\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = \"../../../node_modules/memoizerific sync recursive\";\nmodule.exports = webpackEmptyContext;"],"names":[],"sourceRoot":""}